name: Absensi Otomatis

on:
  schedule:
    # Senin
    - cron: '0 7 * * 1'   # 14:00 WIB - K3 DAN ETIKA PROFESI

    # Selasa
    - cron: '45 3 * * 2'  # 10:45 WIB - KECERDASAN ARTIFISIAL
    - cron: '0 7 * * 2'   # 14:00 WIB - INTELLIGENT TRANSPORTATION SYSTEM
    - cron: '35 9 * * 2'  # 16:35 WIB - TATA TULIS ILMIAH

    # Rabu
    - cron: '0 1 * * 3'   # 08:00 WIB - KEAMANAN INFORMASI
    - cron: '45 3 * * 3'  # 10:45 WIB - SISTEM TERDISTRIBUSI
    - cron: '0 7 * * 3'   # 14:00 WIB - PENGOLAHAN SINYAL MULTIMEDIA

    # Kamis
    - cron: '0 1 * * 4'   # 08:00 WIB - PRAKTIKUM KEAMANAN INFORMASI
    - cron: '45 3 * * 4'  # 10:45 WIB - KEAMANAN JARINGAN
    - cron: '0 7 * * 4'   # 14:00 WIB - SISTEM EMBEDDED
    - cron: '55 7 * * 4'  # 14:55 WIB - PRAKTIKUM SISTEM EMBEDDED

    # Jumat
    - cron: '0 1 * * 5'   # 08:00 WIB - PRAKTIKUM SISTEM TERDISTRIBUSI

  workflow_dispatch:
jobs:
  run-absen:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Ambil kode dari repository
        uses: actions/checkout@v4

      - name: 2. Setup Chrome
        uses: browser-actions/setup-chrome@latest

      - name: 3. Siapkan lingkungan Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
          
      - name: 4. Install library dari requirement.txt
        run: pip install -r requirement.txt

      - name: 5. Jalankan skrip absen
        env:
          NPM: ${{ secrets.NPM }}
          PASSWORD: ${{ secrets.PASSWORD }}
        run: python -u absen.py
